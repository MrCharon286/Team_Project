<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/script/main.js"></script>
<style>
	#options span {
		display: inline-block;
		width: 10%;
		text-align: center;
	}
</style>
<script>
	$(function() {
		$("#add").on("click", function() {
			const formData = new FormData(document.getElementById("add_form"));
			// const param = {name:"spring", age:11} -> ?name=spring&age=11				processData(자바스크립트는 객체는 자동으로 urlencoded된다)
			$.ajax({
				url: "/product/add",
				method: "post",
				data: formData,
				processData: false,	
				contentType: false								// contentType을 multipart/form-data로 지정하려면 $.ajax는 false로 줘야한다 
			}).done(location.href = "/product/list?pageno=1");
		});
	});
</script>
</head>
<body>
<div id="page">
	<header id="header" th:replace="/fragments/header">
	</header>
	<nav id="nav" th:replace="/fragments/nav">
	</nav>
	<div id="main">
		<aside th:replace="/fragments/aside">
		</aside>
		<section id="section">
			<form id="add_form">
				<div class="form-group">
					<label for="stock">카테고리 선택</label>
					<select id="category" name="category" class="form-control">
						<option disabled="disabled" selected="selected">카테고리를 선택하세요</option>
						<option>프로틴</option>
						<option>대용식품</option>
						<option>음료</option>
						<option>소스</option>
					</select>
     			</div>	
   				<div class="form-group">
					<label for="pname">상품명</label>
					<span id="pname_msg"></span>
					<div class="form-group">
						<input type="text" class="form-control" id="pname" name="pname">
					</div>
				</div>	
				<div class="form-group">
					<label for="pprice">가격</label>
					<span id="pprice_msg"></span>
					<div class="form-group">
						<input type="text" class="form-control" id="pprice" name="pprice">
					</div>
				</div>
				<div class="form-group">
					<label for="pimagefile">상품 이미지</label>
					<input type="file" name="pimagefile" id="pimagefile" class="form-control"  accept=".jpg,.jpeg,.png,.gif">
				</div>
				<div class="form-group">
					<label for="pdetailfile">상품 설명</label>
					<input type="file" name="pdetailfile" id="pdetailfile" class="form-control"  accept=".jpg,.jpeg,.png,.gif">
				</div>
     			<div class="form-group" style="text-align: center;">
					<button type="button" id="add" class="btn btn-info">추가</button>
				</div>
				<hr>
			</form>
		</section>
	</div>
	<footer id="footer" th:replace="/fragments/footer">
	</footer>
</div>
</body>
</html>